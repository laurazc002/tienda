define(["ui.layer"],function(){return yTos.utils.namespace("yTos.helpers.Common.ContentLoader"),yTos.helpers.Common.ContentLoader=yTos.helpers.base.extend({initialize:function(){if(!this.scope)throw"common.contentLoader can't be instantiated without a scope"},events:function(){return this.options.customTrigger?{"[data-ytos-custom-trigger] click":"loadContent"}:{click:"loadContent"}},localMessages:function(){var a={};return this.scope&&(a[this.options.onLoad]="renderContent"),a},loadContent:function(a){if(a.preventDefault(),this.options.selector)return this.notify(this.options.onLoad,{html:this.$(this.options.selector).html()},{scope:this.scope});var b={stripMe:!1,autoUpdate:!1};this.options.cache&&(b.cache=!0),this.options.data&&"object"==typeof this.options.data&&(b.data=this.options.data),b.success=function(a){this.options.hash&&$Y.setHash(this.options.hash),this.notify(this.options.onLoad,{html:a},{scope:this.scope})}.bind(this),this.options.onError&&(b.error=function(a){this.notify(this.options.onError,{html:a},{scope:this.scope})}.bind(this)),this.getHTML(this.options.route,b)},renderContent:function(a){a.cssClasses=this.options.classes?this.options.classes:[this.scope],this.notify("yTos::OpenLayer",a)}}),yTos.helpers.Common.ContentLoader});